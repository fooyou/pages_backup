<!DOCTYPE html>
<!-- <html class="fuelux" lang="en"> -->
<html class="fuelux" lang="en">
    <head>
        <meta charset="utf-8">
        <title>virtualenv解决Python开发环境问题的神器</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="">
        <meta name="author" content="">
        <script src="/js/jquery.min.js" type="text/javascript"></script>
        <link href="/css/fuelux.css" rel="stylesheet" />
        <link href="/css/fuelux-responsive.css" rel="stylesheet" />
        <script src="/js/loader.min.js" type="text/javascript"></script>
        <link href="/css/style_midnight.css" rel="stylesheet">
        <link rel="shortcut icon" href="/favicon.ico">
    </head>
    <body data-spy="scroll" data-target=".subnav" data-offset="50">
        <div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container">
            <!--
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>
            -->
            <div class="row">
                <div class="span8 columns">
                    <a class="brand" href="http://fooyou.github.io">书亚博园</a>
                </div>
                <div class="span3 columns">
                    <a class="brand" href="http://fooyou.github.io/atom.xml">RSS</a>
                </div>
            </div>
            <!--
            <div class="nav-collapse">
                <ul class="nav">
                    <li class="">
                        <a href="http://fooyou.github.io"><i class="icon-home"></i> 主页</a>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="icon-comment"></i> 社交 <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li class=""><a href="http://www.linkedin.com/pub/joshua-liu/8a/a75/3a2" rel="tooltip" title="到领英找我" target="_blank">LinkedIn</a></li>
                            <li class="divider"></li>
                            <li class=""><a href="http://fooyou.github.io/atom.xml" rel="tooltip" title="RSS订阅" target="_blank">RSS</a></li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="icon-list"></i> 项目 <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li class=""><a href="https://github.com/fooyou/notes" rel="tooltip" title="学习笔记" target="_blank">笔记</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
            -->
        </div>
    </div>
</div>
        <div class="container">
            <div class="marketing">
                <link rel="stylesheet" href="/css/pygments/trac.css">

<!-- 添加公式支持 -->


<div class="content">
    <script type="text/javascript">
	// //* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
	// var disqus_shortname = 'meshinestar'; // required: replace example with your forum shortname
	// var disqus_identifier = '/blog/virtualenv-you-want-it';
	// var disqus_url = 'http://fooyou.github.io/blog/virtualenv-you-want-it';
	// //* * * DON'T EDIT BELOW THIS LINE * * */
	// (function () {
	// 	var s = document.createElement('script'); s.async = true;
	// 	s.type = 'text/javascript';
	// 	s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
	// 	(document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
	// }());
</script>

<div class="row">
    <div class="span12 column">
        <p><h1>virtualenv解决Python开发环境问题的神器</h1></p>
    </div>
</div>
<div class="row">
    <div class="span12 column">
        <h5><strong>2015-04-23 <small>. Document . <a href="http://fooyou.github.io/blog/virtualenv-you-want-it#disqus_thread" data-disqus-identifier="/blog/virtualenv-you-want-it">评论</a></small></strong>
        <br/><small>标签:  <a href="/tags/virtualenv" title="按标签 &quot;virtualenv&quot;浏览"><u>virtualenv</u></a>     <a href="/tags/python" title="按标签 &quot;python&quot;浏览"><u>python</u></a>    </small><br/><br/>
    </div>
</div>
<div class="row">
    <div class="span6 column">
    </div>
    <div class="span3 column">
        <p class="pull-right"> <a href="/blog/python-web-dev-overview" title="上一篇: Python Web开发初探"><i class="icon-chevron-left"></i></a> 	    	<a href="/blog/scrapy-simple-learning-01" title="下一篇: Scrapy 学习笔记（一）"><i class="icon-chevron-right"></i></a> 	 </p>
    </div>
</div>
    <p><strong>virtualenv</strong></p>

<hr>

<p><em>使用Python做一些简单的事已成了我现在的习惯，越来越喜欢Python这门语言和其强大到让人生畏的社区，正是有了活跃的社区我们在开发中可以方便的使用各种包以完成我们的项目，然而安装那么多的包到我们的服务器会带来很多管理上的麻烦，什么版本依赖啦，向后不兼容啦，有时让人烦不胜烦。然后神器来了，欢迎virtualenv。</em></p>

<p>virtualenv是能创建各自孤立的Python环境的工具，它能为每个不同项目提供一份“独立”的Python环境。当然它并没有真正安装多个Python副本，却是以一种“巧妙”的方式来让各个项目保持独立。</p>

<p>virtualenv可为部署应用提供方便，把开发环境的虚拟环境打包生产环境即可，不需要在服务器上在搭建一遍。</p>

<h3 id="安装">安装</h3>

<p>在Mac OS X或linux下，使用以下命令</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">$ sudo easy_install virtualenv
</code></pre></div>
<p>或更好的使用pip：</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">$ sudo pip install virtualenv
</code></pre></div>
<p><em>使用 <code>-E</code>参数可以使用系统环境变量中的http-proxy</em></p>

<p>ubuntu下也可以直接使用apt-get：</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">$ sudo apt-get install python-virtualenv
</code></pre></div>
<p>如果以前没有安装，那么默认会安装在/usr/local/bin下，使用pip3安装python3版本的virtualenv会加上版本号后缀，比如我现在用的是python3.4，所以我现在的有两个版本的virtualenv：</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">$ ls /usr/local/bin/ | grep virtualenv
virtualenv
virtualenv-3.4
</code></pre></div>
<p>要创建python3的虚拟环境，就要使用<code>vitualenv-3.4 [PRJ]</code></p>

<h3 id="创建环境">创建环境</h3>

<p>安装完毕后，打开terminal就可以创建自己的环境。通常先创建一个项目文件夹，然后使用virtualenv创建虚拟环境 ENV（当然名字自己选）</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">$ mkdir myproject
$ cd myproject
$ virutlaenv ENV
Using base prefix &#39;/usr&#39;
New python executable in project/bin/python3
Also creating executable in project/bin/python
Installing setuptools, pip...done.
</code></pre></div>
<p>我的是12.1.1版本，默认生成的环境是不带系统级 site-packages 的，但以前的什么版本默认是带的，不带比较好。可通过命令查看其他参数 <code>virtualenv --help</code></p>

<p>查看ENV目录可发现：</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">├── bin
│   ├── activate
│   ├── activate.csh
│   ├── activate.fish
│   ├── activate_this.py
│   ├── easy_install
│   ├── easy_install-3.4
│   ├── pip
│   ├── pip3
│   ├── pip3.4
│   ├── python -&gt; python3
│   ├── python3
│   └── python3.4 -&gt; python3
├── include
│   └── python3.4m -&gt; /usr/include/python3.4m
└── lib
    └── python3.4
</code></pre></div>
<h3 id="启动虚拟环境">启动虚拟环境</h3>
<div class="highlight"><pre><code class="language-text" data-lang="text">$ cd ENV
$ ./bin/activate 
</code></pre></div>
<p>OK，现在就已经激活了virtualenv，然后使用pip或者easy_install，或者直接代码安装第三方包了</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">pip install Flask
</code></pre></div>
<p>如果没有启动虚拟环境，系统也安装了pip，那么第三方包将被装在系统环境中，为避免此类事情发生，可以在环境变量中（~/.bashrc, etc）添加变量：</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">export PIP_REQUIRE_VIRTUALENV=true
</code></pre></div>
<h3 id="退出虚拟环境">退出虚拟环境</h3>

<p>退出virtualenv：</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">$ ./bin/deactive
</code></pre></div>
<hr>

<p><strong>virtualenvwrapper</strong></p>

<p>Virtualenvwrapper是virtualenv的扩展包，用于更方便的管理虚拟环境。</p>

<h3 id="安装">安装</h3>
<div class="highlight"><pre><code class="language-text" data-lang="text">$ sudo pip install virtualenvwrapper
</code></pre></div>
<p>此时尚不能使用，实际上需要运行<code>/usr/local/bin/virtualenvwrapper.sh</code>也能使其正常工作，打开这个文件里面有安装说明：</p>
<div class="highlight"><pre><code class="language-text" data-lang="text"># Setup:
#
#  1. Create a directory to hold the virtual environments.
#     (mkdir $HOME/.virtualenvs).
#  2. Add a line like &quot;export WORKON_HOME=$HOME/.virtualenvs&quot;
#     to your .bashrc.
#  3. Add a line like &quot;source /path/to/this/file/virtualenvwrapper.sh&quot;
#     to your .bashrc.
#  4. Run: source ~/.bashrc
#  5. Run: workon
#  6. A list of environments, empty, is printed.
#  7. Run: mkvirtualenv temp
#  8. Run: workon
#  9. This time, the &quot;temp&quot; environment is included.
# 10. Run: workon temp
# 11. The virtual environment is activated.
#
</code></pre></div>
<p>使用方法命令：</p>

<table><thead>
<tr>
<th>Command</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>workon</td>
<td>列出虚拟环境列表。workon [name] 启动/切换虚拟环境</td>
</tr>
<tr>
<td>lsvirtualenv</td>
<td>同上</td>
</tr>
<tr>
<td>mkvirtualenv</td>
<td>新建虚拟环境。mkvirtualenv [name]</td>
</tr>
<tr>
<td>rmvirtualenv</td>
<td>删除虚拟环境</td>
</tr>
<tr>
<td>deactive</td>
<td>关闭虚拟环境</td>
</tr>
</tbody></table>

<h2 id="参考：">参考：</h2>

<blockquote>
<p><a href="https://virtualenv.pypa.io/en/latest/">https://virtualenv.pypa.io/en/latest/</a></p>
</blockquote>

</div>

<div class="row">
    <div class="span6 column">
    </div>
    <div class="span3 column">
        <br>
        <p class="pull-right"> <a href="/blog/python-web-dev-overview" title="上一篇: Python Web开发初探"><i class="icon-chevron-left"></i></a>          <a href="/blog/scrapy-simple-learning-01" title="下一篇: Scrapy 学习笔记（一）"><i class="icon-chevron-right"></i></a>    </p>
    </div>
</div>


<div class="row">
    <div class="span12 columns">
        <h2>评论</h2>
        <p>欢迎回复，请保证一不跑题二要干净</p>
        <!-- 使用的是外国的disqus评论服务，国内有一个叫多说的评论服务也不错（http://duoshuo.com/） -->
        <div id="disqus_thread"></div>
        <script type="text/javascript">
            //* * * CONFIGURATION VARIABLES * * */
            var disqus_shortname = 'meshinestar';
            
            //* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
    </div>
</div>


            </div>
        </div>
        <footer class="footer">
  <div class="container">
	<p class="pull-right"> <a href="/blog/python-web-dev-overview" title="Previous Post: Python Web开发初探">&laquo; 上一篇</a> 	  |  <a href="#">回到顶</a>  |   	<a href="/blog/scrapy-simple-learning-01" title="Next Post: Scrapy 学习笔记（一）">下一篇 &raquo; </a> 	 </p>        
	<p>页面最后生成于 2015-09-09</p>
	<p>如果需要, <a href="mailto:liuchaozhenyu@gmail.com" title="邮件联系我"  target="_blank" >邮件联系我</a>.</p>

    <!-- Twitter No need to open this code -->
<!--     <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script> -->

    <!-- Google + -->
<!--     <script type="text/javascript">
      (function() {
        var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
        po.src = 'https://apis.google.com/js/plusone.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
      })();
    </script> -->

  </div>
</footer>

        

        <script type="text/javascript">
            // //* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            // var disqus_shortname = 'meshinestar'; // required: replace example with your forum shortname
            // //* * * DON'T EDIT BELOW THIS LINE * * */
            // (function () {
            //     var s = document.createElement('script'); s.async = true;
            //     s.type = 'text/javascript';
            //     s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
            //     (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
            // }());
        </script>

        <!-- Google Analytics -->
        <!--    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-29830549-1']);
        _gaq.push(['_trackPageview']);
        (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
        </script>    -->
    </body>
</html>